<!DOCTYPE html>
<html style="height: 100%">
<head>
   <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
     <title>订水</title>
    <link rel="stylesheet" type="text/css" href="static/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="static/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="static/css/dropload.css">
     <link rel="stylesheet" type="text/css" href="stylesheets/orderwater.css">
    <script src="static/js/jquery.min.js"></script>
    <script type="text/javascript" src="static/js/prefixfree.min.js"></script>
</head>

<body>
    <div class="header">
        <div class="navbar-left">
           <a href="index.html"><i class="fa fa-angle-left back"></i></a>
        </div>
        <h1>订水</h1>
    </div>
      <div id="container">
      <a href="pay.html">
      <img src="static/images/orderwater2.png" alt="" width="150px" height="150px" class="img-circle">
      </a>
    </div>
  
      <div class="content">
           <table class="table table-striped">
               <tr class="item" >
                  <td class="item-check"><img src="static/images/check.png"></td> 
                  <td><span class="item-pay">- 8元</span></td>
                  <td class="item-date"><span class="date">2017-01-14</span></td>
               </tr>
               <tr class="item" >
                  <td class="item-check"><img src="static/images/check.png"></td> 
                  <td><span class="item-pay">- 8元</span></td>
                  <td class="item-date"><span class="date">2014-03-14</span></td>
               </tr>
               <tr class="item" >
                  <td class="item-check"><img src="static/images/check.png"></td> 
                  <td><span class="item-pay">- 8元</span></td>
                  <td class="item-date"><span class="date">2014-01-14</span></td>
               </tr>
               <tr class="item" >
                  <td class="item-check"><img src="static/images/check.png"></td> 
                  <td><span class="item-pay">- 8元</span></td>
                  <td class="item-date"><span class="date">2014-01-14</span></td>
               </tr>
               <tr class="item" >
                  <td class="item-check"><img src="static/images/check.png"></td> 
                  <td><span class="item-pay">- 8元</span></td>
                  <td class="item-date"><span class="date">2014-01-14</span></td>
               </tr>
               <tr class="item" >
                  <td class="item-check"><img src="static/images/check.png"></td> 
                  <td><span class="item-pay">- 8元</span></td>
                  <td class="item-date"><span class="date">2014-01-14</span></td>
               </tr>
               <tr class="item" >
                  <td class="item-check"><img src="static/images/check.png"></td> 
                  <td><span class="item-pay">- 8元</span></td>
                  <td class="item-date"><span class="date">2015-01-14</span></td>
               </tr>
              

            </table>
    </div>

</body>

<script src="static/js/dropload.js"></script>
<script type="text/javascript">
    $(window).scroll(function(){
              height = $(window).scrollTop();
              if(height>155||height<30){
                $('.header').fadeIn();
              }else{
                $('.header').fadeOut();
              };

       });
    $(function(){
        var counter = 0;
        // 每页展示4个
        var num = 4;
        var pageStart = 0,pageEnd = 0;

        // dropload
        $('.content').dropload({
            scrollArea : window,
            domDown : {
                domClass   : 'dropload-down',
                domRefresh : '<div class="dropload-refresh">↑上拉加载更多</div>',
                domLoad    : '<div class="dropload-load"><span class="loading"></span>拼命加载中...</div>',
                domNoData  : '<div class="dropload-noData">暂无数据</div>'
            },
            loadDownFn : function(me){
                $.ajax({
                    type: 'GET',
                    url: 'static/json/watermore.json',
                    dataType: 'json',
                    success: function(data){
                        var result = '';
                        counter++;
                        pageEnd = num * counter;
                        pageStart = pageEnd - num;

                        for(var i = pageStart; i < pageEnd; i++){
                            result += '<tr class="item">'+
                                        '<td class="item-check"><img src="static/images/check.png"></td>'+
                                        '<td><span class="item-pay">- 8元</span></td>'+
                                        '<td class="item-date"><span class="date">'+data.lists[i].date+'</span></td>'+
                                    '</tr>';
                            if((i + 1) >= data.lists.length){
                                // 锁定
                                me.lock();
                                // 无数据
                                me.noData();
                                break;
                            }
                        }
                        // 为了测试，延迟1秒加载
                        setTimeout(function(){
                            $('.table').append(result);
                            // 每次数据加载完，必须重置
                            me.resetload();
                        },500);
                    },
                    error: function(xhr, type){
                        alert('Ajax error!');
                        // 即使加载出错，也得重置
                        me.resetload();
                    }
                });
            },
            threshold : 50
        });
    });
    
</script>
</html>
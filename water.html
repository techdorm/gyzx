
<!DOCTYPE html>
<html style="height: 100%">
<head>
   <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
     <title>水电费</title>
    <link rel="stylesheet" type="text/css" href="static/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="static/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="static/css/ui-dialog.css">
    <script src="static/js/jquery.min.js"></script>
     <script src="static/js/dialog-min.js"></script>
    <script src="static/js/echart/echarts.min.js"></script>
    <script src="static/js/echart/macarons.js"></script>
<style type="text/css">
    /* ------------------------------------------
      RESET  
    --------------------------------------------- */
    body, div,
    h1, h2, h3, h4, h5, h6,
    p, blockquote, pre, dl, dt, dd, ol, ul, li, hr,
    fieldset, form, label, legend, th, td,
    article, aside, figure, footer, header, hgroup, menu, nav, section,
    summary, hgroup {
      margin: 0;
      padding: 0;
      border: 0;
    }
    body{
        font-size:1.5em;
    }   
    a,a:active,a:hover {
      outline: 0;
      text-decoration: none;
    }
    html,body { height:100%; }
   

    .header {
    position: fixed;
    z-index: 1060;
    top: 0;
    right: 0;
    left: 0;
    height: 45px;
    border-bottom: 1px solid #43A382;
    background-color: #45A673;
    -webkit-box-shadow: 0 1px 1px rgba(98, 98, 98, 0.3);
    box-shadow: 0 1px 1px rgba(98, 98, 98, 0.3); }
    .header h1 {
    color: #fff;
    font-size: 18px;
    line-height: 44px;
    position: absolute;
    left: 50%;
    -webkit-transform: translate(-50%, 0);
    text-align: center;
    font-family: "YouYuan"; }
    .header .navbar-left {
    float: left;
    /*color: #fff;*/ }
    .header .navbar-left .back {
      color: #FFF;
      font-size: 2.5em; }
    .header .navbar-left > * {
    display: table-cell;
    height: 45px;
    padding-right: 10px;
    padding-left: 10px;
    vertical-align: middle; }

    .now {
    padding-top: 45px; 
    }
    .now .panel{
      margin-bottom: 0;
    }
    .now .month ,.now .year{
    font-size: 2rem; }
    .now .fa-calendar {
    color: #949594;
    display: table-cell;
    height: 45px;
    padding-left: 10px;
    vertical-align: middle;
    font-size: 2em; }

    .panel-body{
     padding:5px 15px;
    }
    #container{
    padding-bottom: 20px;
    height:55%;
    }
    .exam-footer {
        position: fixed;
        left: 0;
        bottom: 0;
        width: 100%;
        text-align: center;
        z-index: 5;
        line-height: 3em;
        height: 3em;
        background-color: #45A673;
    }
    #exam-button {
        width: 100%;
        height: 100%;
        font-size: 18px;
        background-color: #45A673;
        color:#FFF;
    }

</style>

</head>

<body>
    <div class="header">
        <div class="navbar-left">
           <a href="index.html"><i class="fa fa-angle-left back"></i></a>
        </div>
        <h1>水电费</h1>
    </div>
     <div class="now"> 
      <div class="panel panel-default">
          <div class="panel-heading"><span class="year">2016</span>/<span class="month">4</span>
               <span id="calender">
               <i class="fa fa-calendar pull-right" aria-hidden="true" data-event="test"></i>
               </span>
          </div>
      </div>
    </div>
    <div class="panel">
        <div class="panel-body">
          <div class="water">
            <span >水费</span>
                <div class="pull-right sum">￥24.28</div>
              </div>
              <hr/>
              <div class="electric">
                 <span>电费</span>
                 <div class="pull-right sum">￥174.28</div>
              </div>
        </div>
    </div>

    <div id="container"></div>
    <div class="exam-footer">
    <a type="btn" href="pay.html" id="exam-button" class="btn">缴费</a>
    </div>
    

    <script type="text/javascript">
    var dom = document.getElementById("container");
    var myChart = echarts.init(dom,'macarons');
   
    option = null;
    option = {
    tooltip : {
        trigger: 'axis'
    },
    legend: {
        data:['水费','电费']
    },
    grid: {
        left: '3%',
        right: '6%',
        top:'30px',
        containLabel: true
    },
    calculable : true,
    // dataZoom : {
    //     show : true,
    //     realtime : true,
    //     fillerColor:'rgba(128, 184, 226, 0.3)',
    //     start : 60,
    //     end : 100
    // },
    color:['#009EFF','#EF6612'],

    xAxis : [
        {
            type : 'category',
            boundaryGap : false,
            // data : function (){
            //     var list = [];
            //     for (var i = 1; i <= 12; i++) {
            //         list.push(i+'月份');
            //     }
            //     return list;
            // }()
            data:['1月','2月','3月','4月','5月','6月']
        }
    ],
    yAxis : [
        {
            type : 'value'
        }
    ],
   series : [

    ]
};

    CheckMessage=function(){
              $.ajax({
                  type: "GET",
                  async: false,
                  url: 'static/json/water.json',
                  dataType: "json",
                  success: function (result) {
                    console.log("success");

                      if(result.status==200){
                          option.series = [result.month[0].one[0],result.month[0].one[1]];
                          console.log(option.series);
                          myChart.hideLoading();
                          myChart.setOption(option);
                      }
                  },
                  error: function (a,b,c) {
                    alert("错误");
                  }
              });
            }
    $(document).ready(function() {
        CheckMessage();
    }); 
    </script>
      <script type="text/javascript">
      $('i[data-event=test]').on('click', function () {
        var d = dialog({
         title: '请选择月份',
          content: ' <input id="user_date" class="form-control" type="month"/>',
          height: 100,
          width: 280, 
          okValue: '确 定',
          ok: function () {
            var x=$("#user_date").val();
            console.log(x);
            $(".month")[0].innerText=x[5]+x[6];
            $(".year")[0].innerText=x[0]+x[1]+x[2]+x[3]; 
            // d.close().remove();
            CheckMessage=function(){
              $.ajax({
                  type: "GET",
                  async: false,
                  url: 'static/json/water.json',
                  dataType: "json",
                  success: function (result) {
                     console.log("success");
                      if(result.status ==200){

                          option.series = [result.month[1].two[0],result.month[1].two[1]];


                          myChart.hideLoading();
                          myChart.setOption(option);
                      }
                  },
                  error: function (errorMsg) {
                    alert("数据加载失败，请刷新")
                  }
              });
            } 
            CheckMessage();

          },
          cancelValue: '取 消',
          cancel: function () {}
        });

        d.showModal();
      });

    </script>
</body>